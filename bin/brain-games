#!/usr/bin/env php
<?php

namespace Brain\Games;

use function Brain\Games\Even\gameEven;
use function Brain\Games\Calc\gameCalc;
use function Brain\Games\Nod\gameNod;
use function Brain\Games\Engine\runGame;
use function Brain\Games\Cli\replyToPlayer;
use function Brain\Games\Cli\getUserName;

$autoloadPath1 = __DIR__ . "/../vendor/autoload.php";
$autoloadPath2 = __DIR__ . "/../../../autoload.php";
if (file_exists($autoloadPath1)) {
    require_once $autoloadPath1;
} else {
    require_once $autoloadPath2;
}
$gamesNumber = 3;

$playerName = getUserName();

// random game selection
switch (rand(0, 2)) {
    case 0:
    $game = gameCalc($gamesNumber);
    case 1:
    $game = gameEven($gamesNumber);
    case 2:
    $game = gameNod($gamesNumber);
}

$rules = $game[0];
$questions = $game[1];
$answers = $game[2];
$result = runGame($rules, $questions, $answers);

replyToPlayer($playerName, $result);
