#!/usr/bin/env php
<?php

namespace Brain\Calc;

$autoloadPath1 = __DIR__ . "/../vendor/autoload.php";
$autoloadPath2 = __DIR__ . "/../../../autoload.php";
if (file_exists($autoloadPath1)) {
    require_once $autoloadPath1;
} else {
    require_once $autoloadPath2;
}

use function Brain\Games\Engine\runGame;
use function Brain\Games\Cli\replyToPlayer;
use function  Brain\Games\Cli\getUserName;

$rules = 'What is the result of the expression?';
$maxQuestions = 3;

$questions = [];
$answers = [];

for ($i = 0; $i < $maxQuestions; $i++) {
    $num1 = rand(0, 99);
    $num2 = rand(0, 9);
    $curExp = rand(1, 3);
    switch($curExp) {
        case 1:
            $questions[$i] = "{$num1} + {$num2}";
            $answers[$i] = strval($num1 + $num2);
        case 2:
            $questions[$i] = "{$num1} - {$num2}";
            $answers[$i] = strval($num1 - $num2);
        case 3:
            $questions[$i] = "{$num1} * {$num2}";
            $answers[$i] = strval($num1 * $num2);
    }
}

$playerName = getUserName();
$result = runGame($rules, $questions, $answers);
replyToPlayer($playerName, $result);
